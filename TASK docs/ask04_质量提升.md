# Ask04：质量提升 - 质量控制机制

## 基本信息
- **对应任务**：task04
- **依赖阶段**：Phase 3（Pipeline补齐）
- **被依赖于**：Phase 5（多题材扩展）

## 阶段目标
建立完善的剧本质量控制体系，包括格式校验、多轮审稿、样例对比评估。

## 包含步骤
> 状态标记：( ) 待细化 | (x) 已确认

- (x) **D1 输出校验器** — 产出：格式/指标自动校验模块
- (x) **D2 多轮审稿机制** — 产出：自动触发返修的审稿循环
- (x) **D3 样例对比评估** — 产出：与优秀样例的差距分析模块

## 已确认事项
- 校验器基于纯 Python 规则（正则 + 计数）
- 评分不通过自动触发返修，默认最多3轮
- 对比基于统计指标（行数、台词比例等量化对比）

---

## (x) 步骤 D1：输出校验器

### Q1：校验器实现方式？
**选择**：A. 纯 Python 规则校验（正则 + 计数）

### Q2：校验指标？
**选择**：A. 格式合规 + 行数范围 + 台词/舞台指示比例

### Q3：校验结果输出？
**选择**：A. 通过/不通过 + 具体问题列表

---

## (x) 步骤 D2：多轮审稿机制

### Q1：审稿触发条件？
**选择**：A. D1 校验不通过时自动触发

### Q2：最大审稿轮数？
**选择**：A. 默认3轮，可配置

### Q3：审稿日志？
**选择**：A. 记录每轮审稿结果和修改内容

---

## (x) 步骤 D3：样例对比评估

### Q1：对比方式？
**选择**：A. 统计指标对比（行数、台词比例等量化对比）

### Q2：对比报告格式？
**选择**：A. 表格式对比（生成结果 vs 样例均值）

---

## 输出映射
完成细化 → `TASK docs/task04/`（plan.md + 3 个 phase 文件）✅ 已生成
