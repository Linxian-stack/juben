# Task04：质量提升 - 质量控制机制

## 概要
建立剧本质量控制体系：纯 Python 格式校验器 + 自动触发返修循环 + 样例对比评估报告。

## 依赖
- 前置：task03（Pipeline 产出剧本供校验）
- 后续：task05（多题材扩展需要通用的质量标准）

## Phase 列表

| Phase | 文件 | 内容 | 产出物 |
|-------|------|------|--------|
| 01 | phase01.md | D1 输出校验器 | `juben_gen/validator.py` |
| 02 | phase02.md | D2 多轮审稿机制 | `juben_gen/review_loop.py` |
| 03 | phase03.md | D3 样例对比评估 | `juben_gen/evaluator.py` |

## 进度追踪

- [x] phase01: D1 输出校验器
- [x] phase02: D2 多轮审稿机制
- [ ] phase03: D3 样例对比评估

## 执行顺序
Phase 01 → 02 → 03（校验器是审稿触发条件，评估是最终报告）

## 验收标准
- 校验器检查：格式合规 + 行数范围 + 台词/舞台指示比例
- 校验不通过自动触发返修，默认最多3轮，可配置
- 每轮审稿结果和修改内容有日志记录
- 对比报告为表格式（生成结果 vs 样例均值）
